/*! PointerEvent v1.3.0 (c) anseki https://github.com/anseki/pointer-event */
var PointerEvent=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r,o=[],i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return clearTimeout(e)},u=Date.now();function c(){var e,t;r&&(a.call(window,r),r=null),o.forEach((function(t){var n;(n=t.event)&&(t.event=null,t.listener(n),e=!0)})),e?(u=Date.now(),t=!0):Date.now()-u<500&&(t=!0),t&&(r=i.call(window,c))}function l(e){var t=-1;return o.some((function(n,r){return n.listener===e&&(t=r,!0)})),t}var s={add:function(e){var t;return-1===l(e)?(o.push(t={listener:e}),function(e){t.event=e,r||c()}):null},remove:function(e){var t;(t=l(e))>-1&&(o.splice(t,1),!o.length&&r&&(a.call(window,r),r=null))}};function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=[],p=[],v=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){v=!0}}))}catch(e){}function h(e,t,n,r){e.addEventListener(t,n,v?r:r.capture)}function m(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function y(e,t){if(null!=e&&null!=t)for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return null}function w(e){return e&&"number"==typeof e.clientX&&"number"==typeof e.clientY}function b(e){e.preventDefault()}var P=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.startHandlers={},this.lastHandlerId=0,this.curPointerClass=null,this.curTouchId=null,this.lastPointerXY={clientX:0,clientY:0},this.lastTouchTime=0,this.options={preventDefault:!0,stopPropagation:!0},t&&["preventDefault","stopPropagation"].forEach((function(e){"boolean"==typeof t[e]&&(n.options[e]=t[e])}))}var t,n,r;return t=e,r=[{key:"addEventListenerWithOptions",get:function(){return h}},{key:"initClickEmulator",value:function(e,t,n){return f.includes(e)||(f.push(e),null==t&&(t=16),null==n&&(n=400),h(e,"touchstart",(function(e){var t=e.changedTouches[0];r=t.clientX,o=t.clientY,i=t.identifier,a=performance.now()}),{capture:!1,passive:!1}),h(e,"touchend",(function(u){var c=y(u.changedTouches,i);"number"==typeof r&&"number"==typeof o&&"number"==typeof a&&c&&"number"==typeof c.clientX&&"number"==typeof c.clientY&&m({x:r,y:o},{x:c.clientX,y:c.clientY})<=t&&performance.now()-a<=n&&setTimeout((function(){var t=new MouseEvent("click",{clientX:c.clientX,clientY:c.clientY});t.emulated=!0,e.dispatchEvent(t)}),0),r=o=i=a=null}),{capture:!1,passive:!1}),h(e,"touchcancel",(function(){r=o=i=a=null}),{capture:!1,passive:!1})),e;var r,o,i,a}},{key:"initDblClickEmulator",value:function(t,n,r){return p.includes(t)||(p.push(t),null==n&&(n=16),null==r&&(r=400),e.initClickEmulator(t,n,r),h(t,"click",(function(e){e.emulated&&("number"==typeof o&&"number"==typeof i&&"number"==typeof a?("number"==typeof e.clientX&&"number"==typeof e.clientY&&m({x:o,y:i},{x:e.clientX,y:e.clientY})<=n&&performance.now()-a<=2*r&&setTimeout((function(){var n=new MouseEvent("dblclick",{clientX:e.clientX,clientY:e.clientY});n.emulated=!0,t.dispatchEvent(n)}),0),o=i=a=null):(o=e.clientX,i=e.clientY,a=performance.now()))}),{capture:!1,passive:!1})),t;var o,i,a}}],(n=[{key:"regStartHandler",value:function(e){var t=this;return t.startHandlers[++t.lastHandlerId]=function(n){var r,o,i="mousedown"===n.type?"mouse":"touch",a=Date.now();if("touch"===i)t.lastTouchTime=a,r=n.changedTouches[0],o=n.changedTouches[0].identifier;else{if(a-t.lastTouchTime<400)return;r=n}if(!w(r))throw new Error("No clientX/clientY");t.curPointerClass&&t.cancel(),e.call(t,r)&&(t.curPointerClass=i,t.curTouchId="touch"===i?o:null,t.lastPointerXY.clientX=r.clientX,t.lastPointerXY.clientY=r.clientY,t.options.preventDefault&&n.preventDefault(),t.options.stopPropagation&&n.stopPropagation())},t.lastHandlerId}},{key:"unregStartHandler",value:function(e){delete this.startHandlers[e]}},{key:"addStartHandler",value:function(e,t){if(!this.startHandlers[t])throw new Error("Invalid handlerId: ".concat(t));return h(e,"mousedown",this.startHandlers[t],{capture:!1,passive:!1}),h(e,"touchstart",this.startHandlers[t],{capture:!1,passive:!1}),h(e,"dragstart",b,{capture:!1,passive:!1}),t}},{key:"removeStartHandler",value:function(e,t){if(!this.startHandlers[t])throw new Error("Invalid handlerId: ".concat(t));return e.removeEventListener("mousedown",this.startHandlers[t],!1),e.removeEventListener("touchstart",this.startHandlers[t],!1),e.removeEventListener("dragstart",b,!1),t}},{key:"addMoveHandler",value:function(e,t,n){var r=this;function o(e){var t="mousemove"===e.type?"mouse":"touch";if("touch"===t&&(r.lastTouchTime=Date.now()),t===r.curPointerClass){var n="touch"===t?y(e.changedTouches,r.curTouchId):e;w(n)&&(n.clientX===r.lastPointerXY.clientX&&n.clientY===r.lastPointerXY.clientY||r.move(n),r.options.preventDefault&&e.preventDefault(),r.options.stopPropagation&&e.stopPropagation())}}var i=n?o:s.add(o);h(e,"mousemove",i,{capture:!1,passive:!1}),h(e,"touchmove",i,{capture:!1,passive:!1}),r.curMoveHandler=t}},{key:"move",value:function(e){w(e)&&(this.lastPointerXY.clientX=e.clientX,this.lastPointerXY.clientY=e.clientY),this.curMoveHandler&&this.curMoveHandler(this.lastPointerXY)}},{key:"addEndHandler",value:function(e,t){var n=this;function r(e){var t="mouseup"===e.type?"mouse":"touch";if("touch"===t&&(n.lastTouchTime=Date.now()),t===n.curPointerClass){var r="touch"===t?y(e.changedTouches,n.curTouchId)||(y(e.touches,n.curTouchId)?null:{}):e;r&&(n.end(r),n.options.preventDefault&&e.preventDefault(),n.options.stopPropagation&&e.stopPropagation())}}h(e,"mouseup",r,{capture:!1,passive:!1}),h(e,"touchend",r,{capture:!1,passive:!1}),n.curEndHandler=t}},{key:"end",value:function(e){w(e)&&(this.lastPointerXY.clientX=e.clientX,this.lastPointerXY.clientY=e.clientY),this.curEndHandler&&this.curEndHandler(this.lastPointerXY),this.curPointerClass=this.curTouchId=null}},{key:"addCancelHandler",value:function(e,t){var n=this;h(e,"touchcancel",(function(e){n.lastTouchTime=Date.now(),null!=n.curPointerClass&&(y(e.changedTouches,n.curTouchId)||!y(e.touches,n.curTouchId))&&n.cancel()}),{capture:!1,passive:!1}),n.curCancelHandler=t}},{key:"cancel",value:function(){this.curCancelHandler&&this.curCancelHandler(),this.curPointerClass=this.curTouchId=null}}])&&d(t.prototype,n),r&&d(t,r),e}();t.default=P}]).default;