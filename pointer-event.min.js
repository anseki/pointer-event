/*! PointerEvent v0.4.1 (c) anseki https://github.com/anseki/pointer-event */
var PointerEvent=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=500,o=[],a=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},i=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return clearTimeout(e)},u=Date.now(),s=void 0;function l(){var e=void 0,t=void 0;s&&(i.call(window,s),s=null),o.forEach(function(t){var n;(n=t.event)&&(t.event=null,t.listener(n),e=!0)}),e?(u=Date.now(),t=!0):Date.now()-u<r&&(t=!0),t&&(s=a.call(window,l))}function c(e){var t=-1;return o.some(function(n,r){return n.listener===e&&(t=r,!0)}),t}var d={add:function(e){var t=void 0;return-1===c(e)?(o.push(t={listener:e}),function(e){t.event=e,s||l()}):null},remove:function(e){var t;(t=c(e))>-1&&(o.splice(t,1),!o.length&&s&&(i.call(window,s),s=null))}},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var f=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){f=!0}}))}catch(e){}function p(e,t,n,r){e.addEventListener(t,n,f?r:r.capture)}function m(e){e.preventDefault()}var h=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.startHandlers={},this.lastHandlerId=0,this.curPointerClass=null,this.lastPointerXY={clientX:0,clientY:0},this.lastStartTime=0,this.options={preventDefault:!0,stopPropagation:!0},t&&["preventDefault","stopPropagation"].forEach(function(e){"boolean"==typeof t[e]&&(n.options[e]=t[e])})}return v(e,[{key:"regStartHandler",value:function(e){var t=this;return t.startHandlers[++t.lastHandlerId]=function(n){var r="mousedown"===n.type?"mouse":"touch",o="mouse"===r?n:n.targetTouches[0]||n.touches[0],a=Date.now();t.curPointerClass&&r!==t.curPointerClass&&a-t.lastStartTime<400||e(o)&&(t.curPointerClass=r,t.lastPointerXY.clientX=o.clientX,t.lastPointerXY.clientY=o.clientY,t.lastStartTime=a,t.options.preventDefault&&n.preventDefault(),t.options.stopPropagation&&n.stopPropagation())},t.lastHandlerId}},{key:"unregStartHandler",value:function(e){delete this.startHandlers[e]}},{key:"addStartHandler",value:function(e,t){if(!this.startHandlers[t])throw new Error("Invalid handlerId: "+t);return p(e,"mousedown",this.startHandlers[t],{capture:!1,passive:!1}),p(e,"touchstart",this.startHandlers[t],{capture:!1,passive:!1}),p(e,"dragstart",m,{capture:!1,passive:!1}),t}},{key:"removeStartHandler",value:function(e,t){if(!this.startHandlers[t])throw new Error("Invalid handlerId: "+t);return e.removeEventListener("mousedown",this.startHandlers[t],!1),e.removeEventListener("touchstart",this.startHandlers[t],!1),e.removeEventListener("dragstart",m,!1),t}},{key:"addMoveHandler",value:function(e,t){var n=this,r=d.add(function(e){var t="mousemove"===e.type?"mouse":"touch",r="mouse"===t?e:e.targetTouches[0]||e.touches[0];t===n.curPointerClass&&(n.move(r),n.options.preventDefault&&e.preventDefault(),n.options.stopPropagation&&e.stopPropagation())});p(e,"mousemove",r,{capture:!1,passive:!1}),p(e,"touchmove",r,{capture:!1,passive:!1}),n.curMoveHandler=t}},{key:"move",value:function(e){this.curMoveHandler&&(e||(e=this.lastPointerXY),this.curMoveHandler(e),this.lastPointerXY.clientX=e.clientX,this.lastPointerXY.clientY=e.clientY)}},{key:"addEndHandler",value:function(e,t){var n=this;function r(e){var t="mouseup"===e.type?"mouse":"touch",r="mouse"===t?e:e.targetTouches[0]||e.touches[0];t===n.curPointerClass&&(n.end(r),n.options.preventDefault&&e.preventDefault(),n.options.stopPropagation&&e.stopPropagation())}p(e,"mouseup",r,{capture:!1,passive:!1}),p(e,"touchend",r,{capture:!1,passive:!1}),n.curEndHandler=t}},{key:"end",value:function(e){this.curEndHandler&&(e||(e=this.lastPointerXY),this.curEndHandler(e),this.curPointerClass=null)}}]),e}();t.default=h}]).default;